/**
 * circlerasteriser v0.0.0 build Oct 15 2015
 * https://github.com/vanruesc/circlerasteriser
 * Copyright 2015 Raoul van Rueschen, Zlib
 */
"use strict";function CircleRasteriser(i){this.image=null,this._radius=60,this._center={x:100,y:75},this._size={w:200,h:150},this._actualWidth=0,this._actualHeight=0,this._valuesPerRow=0,this.circleColor={r:175,g:0,b:0,a:1},this.bgColor={r:23,g:23,b:23,a:1},this.gridColor={r:32,g:40,b:32,a:1},this._gridLineWidth=1,this._pixelSize=5,this._pixelSize4=4*this._pixelSize,void 0!==i&&(void 0!==i.radius&&(this.radius=i.radius),void 0!==i.center&&(this.center=i.center),void 0!==i.size&&(this.size=i.size),void 0!==i.gridLineWidth&&(this.gridLineWidth=i.gridLineWidth),void 0!==i.pixelSize&&(this.pixelSize=i.pixelSize),void 0!==i.circleColor&&(this.circleColor=i.circleColor),void 0!==i.bgColor&&(this.bgColor=i.bgColor),void 0!==i.gridColor&&(this.gridColor=i.gridColor))}Object.defineProperty(CircleRasteriser.prototype,"size",{get:function(){return this._size},set:function(i){void 0!==i&&null!==i&&"number"==typeof i.w&&"number"==typeof i.h&&(this._size.w=i.w+.5|0,this._size.h=i.h+.5|0)}}),Object.defineProperty(CircleRasteriser.prototype,"center",{get:function(){return this._center},set:function(i){void 0!==i&&null!==i&&"number"==typeof i.x&&"number"==typeof i.y&&(this._center.x=i.x+.5|0,this._center.y=i.y+.5|0)}}),Object.defineProperty(CircleRasteriser.prototype,"radius",{get:function(){return this._radius},set:function(i){"number"==typeof i&&(this._radius=i+.5|0)}}),Object.defineProperty(CircleRasteriser.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(i){"number"==typeof i&&(this._pixelSize=i+.5|0)}}),Object.defineProperty(CircleRasteriser.prototype,"gridLineWidth",{get:function(){return this._gridLineWidth},set:function(i){"number"==typeof i&&(this._gridLineWidth=i+.5|0)}}),CircleRasteriser.prototype.calculateIndex=function(i,t){return(t*this._pixelSize+t*this._gridLineWidth+this._gridLineWidth)*(4*this._actualWidth)+4*(i*this._pixelSize+i*this._gridLineWidth+this._gridLineWidth)},CircleRasteriser.prototype.fillPixelCell=function(i,t){var e,r,s,h;if(i>=0&&i<this._size.w&&t>=0&&t<this._size.h)for(h=this.image.data,s=this.calculateIndex(i,t),e=0;e<this._pixelSize;++e){for(r=0;r<this._pixelSize;++r)h[s++]=this.circleColor.r,h[s++]=this.circleColor.g,h[s++]=this.circleColor.b,h[s++]=this.circleColor.a;s+=this._valuesPerRow-this._pixelSize4}},CircleRasteriser.prototype.generateImage=function(){var i,t,e,r,s,h,l,o,d;for(this._actualWidth=this._size.w*this._gridLineWidth+this._gridLineWidth+this._size.w*this._pixelSize,this._actualHeight=this._size.h*this._gridLineWidth+this._gridLineWidth+this._size.h*this._pixelSize,this._valuesPerRow=4*this._actualWidth,this._pixelSize4=4*this._pixelSize,t=this._actualWidth*this._actualHeight*4,e=new Uint8ClampedArray(t),this.image={data:e,width:this._actualWidth,height:this._actualHeight},r=0,s=0,h=0,d=this._gridLineWidth+this._pixelSize;s<this._actualHeight;){if(r=0,s%d<this._gridLineWidth)for(;r<this._actualWidth;)e[h++]=this.gridColor.r,e[h++]=this.gridColor.g,e[h++]=this.gridColor.b,e[h++]=this.gridColor.a,++r;else for(;r<this._actualWidth;)r%d<this._gridLineWidth?(e[h++]=this.gridColor.r,e[h++]=this.gridColor.g,e[h++]=this.gridColor.b,e[h++]=this.gridColor.a):(e[h++]=this.bgColor.r,e[h++]=this.bgColor.g,e[h++]=this.bgColor.b,e[h++]=this.bgColor.a),++r;++s}for(l=this._center.x,o=this._center.y,r=this._radius,s=0,i=1-r;r>=s;)this.fillPixelCell(r+l,s+o),this.fillPixelCell(s+l,r+o),this.fillPixelCell(-r+l,s+o),this.fillPixelCell(-s+l,r+o),this.fillPixelCell(-r+l,-s+o),this.fillPixelCell(-s+l,-r+o),this.fillPixelCell(r+l,-s+o),this.fillPixelCell(s+l,-r+o),++s,0>=i?i+=2*s+1:(--r,i+=2*(s-r)+1);return this.image},module.exports=CircleRasteriser;