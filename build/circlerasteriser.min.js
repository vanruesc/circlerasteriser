/**
 * circlerasteriser v0.0.0 build Oct 14 2015
 * https://github.com/vanruesc/circlerasteriser
 * Copyright 2015 Raoul van Rueschen, Zlib
 */
"use strict";function CircleRasteriser(i){this.image=null,this.radius=60,this.center={x:0,y:0},this.size={w:200,h:150},this.circleColor={r:175,g:0,b:0,a:1},this.bgColor={r:23,g:23,b:23,a:1},this.gridColor={r:32,g:40,b:32,a:1},this.gridLineWidth=1,this.pixelSize=5,void 0!==i&&(void 0!==i.radius&&(this.radius=i.radius),void 0!==i.center&&(this.center=i.center),void 0!==i.size&&(this.size=i.size),void 0!==i.gridLineWidth&&(this.gridLineWidth=i.gridLineWidth),void 0!==i.pixelSize&&(this.pixelSize=i.pixelSize),void 0!==i.circleColor&&(this.circleColor=i.circleColor),void 0!==i.bgColor&&(this.bgColor=i.bgColor),void 0!==i.gridColor&&(this.gridColor=i.gridColor))}CircleRasteriser.prototype.calculateIndex=function(i,e){var t=this.size.w*this.gridLineWidth+this.gridLineWidth+this.size.w*this.pixelSize,r=(e*this.pixelSize+e*this.gridLineWidth+this.gridLineWidth)*(4*t)+4*(i*this.pixelSize+i*this.gridLineWidth+this.gridLineWidth);return r},CircleRasteriser.prototype.fillPixelCell=function(i,e){var t,r,s=4*(this.size.w*this.gridLineWidth+this.gridLineWidth+this.size.w*this.pixelSize),l=this.calculateIndex(i,e),h=this.image.data;for(t=0;t<this.pixelSize;++t){for(r=0;r<this.pixelSize;++r)h[l++]=this.circleColor.r,h[l++]=this.circleColor.g,h[l++]=this.circleColor.b,h[l++]=this.circleColor.a;l+=s-4*this.pixelSize}},CircleRasteriser.prototype.generateImage=function(){for(var i,e=this.center.x,t=this.center.y,r=this.size.w*this.gridLineWidth+this.gridLineWidth+this.size.w*this.pixelSize,s=this.size.h*this.gridLineWidth+this.gridLineWidth+this.size.h*this.pixelSize,l=r*s*4,h=new Uint8ClampedArray(l),o=0,d=0,g=0,n=0,C=!0;s>d;){for(o=0,C=!0;r>o;)if(C||d%(this.pixelSize+this.gridLineWidth)<this.gridLineWidth){for(n=0;n<this.gridLineWidth;++n)h[g++]=this.gridColor.r,h[g++]=this.gridColor.g,h[g++]=this.gridColor.b,h[g++]=this.gridColor.a,++o;C=!1}else{for(n=0;n<this.pixelSize;++n)h[g++]=this.bgColor.r,h[g++]=this.bgColor.g,h[g++]=this.bgColor.b,h[g++]=this.bgColor.a,++o;C=!0}++d}for(this.image={data:h,width:r,height:s},o=this.radius,d=0,i=1-o;o>=d;)this.fillPixelCell(o+e,d+t),this.fillPixelCell(d+e,o+t),this.fillPixelCell(-o+e,d+t),this.fillPixelCell(-d+e,o+t),this.fillPixelCell(-o+e,-d+t),this.fillPixelCell(-d+e,-o+t),this.fillPixelCell(o+e,-d+t),this.fillPixelCell(d+e,-o+t),++d,0>=i?i+=2*d+1:(--o,i+=2*(d-o)+1);return this.image},module.exports=CircleRasteriser;